import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

async function main() {
    console.log('Updating all regulations with full content...')

    const regulationsToUpdate = [
        {
            title: '市场准入负面清单（2025年版）',
            content: `《市场准入负面清单（2025年版）》于2025年4月24日由国家发展改革委、商务部、市场监管总局联合发布。

一、总体情况
新修订的清单事项数量由2022年版的117项缩减至106项，减少了11项，进一步放宽市场准入限制。清单坚持“该减的坚决减，该增的合理增”的原则，全面体现了近年来法律法规“立改废释”和行政审批制度改革的成果。

二、主要调整
1. 删除了8条全国性措施，包括公章刻制业由许可制改为备案制，计算机信息系统安全专用产品销售业务改革为基于强制性国家标准的检测认证制度等。
2. 取消了相应的地方性许可措施，并部分放开了一批全国性措施，如取消电视剧制作单位设立、药品批发零售企业筹建等管理措施。
3. 将民用无人驾驶航空器运营合格证审批（微型无人驾驶航空器除外）以及电子烟等新型烟草制品的生产、批复、零售相关审批纳入负面清单。

三、管理要求
这项制度的核心要求是全国统一，实行“全国一张清单”管理模式，确保各类经营主体可依法平等进入负面清单之外的领域。`
        },
        {
            title: '公平竞争审查条例实施办法',
            content: `《公平竞争审查条例实施办法》由国家市场监督管理总局发布，并于2025年4月20日起施行。共48条。

一、总体要求
明确了公平竞争审查的范围，确定了市场监管总局及县级以上地方市场监管部门指导、组织实施公平竞争审查制度的具体职责，并压实了文件起草单位落实公平竞争审查制度的责任。

二、审查标准细化
将《条例》规定的限制或者变相限制市场准入和退出、限制商品要素自由流动、影响生产经营成本、影响生产经营行为等四个方面的审查标准细化为66项具体情形。
重点规定：
1. 不得含有违法设置或者授予政府特许经营权的内容。
2. 没有法律、行政法规依据或者未经国务院批准，不得设置特许经营权或以特许经营名义增设行政许可事项。

三、审查机制健全
对起草单位开展公平竞争审查的程序和内容提出了具体要求，明确了听取利害关系人意见的方式和范围。审查应当在政策措施内容基本完备后开展，若发生重大变化应重新审查。

四、监督保障
完善了公平竞争审查举报处理工作程序，建立了健全的公平竞争审查抽查机制，并对违反《条例》规定的行为规定了督促整改、约谈、书面提醒敦促、行政建议等处置措施。`
        },
        {
            title: '公路工程建设项目资格预审文件和招标文件公平竞争合规指引',
            content: `《公路工程建设项目资格预审文件和招标文件公平竞争合规指引》于2025年3月28日由交通运输部印发，并自发布之日起施行。

一、总则
阐述了制定目的、依据和适用范围，旨在规范公路工程建设项目资格预审文件和招标文件的编制。

二、内容设置（禁止性规定）
1. 不得设置违反公平竞争的内容。
2. 不得设置不合理的投标资格条件或评标（审查）标准，例如违法限定所有制形式、设定超过实际需要的财务指标、歧视外地经营者、将已取消的资质作为条件等。
3. 不得设置非法定或不合规的要求。
4. 不得设置违法违规的合同条款。

三、组织实施
规定了招标人依法依规编制文件、潜在投标人或利害关系人提出异议、招标人处理异议、投诉处理和交通运输主管部门核查等流程。

四、监督管理
要求建立健全机制、公开联系方式、畅通投诉渠道、强化信用管理等。`
        },
        {
            title: '国务院办公厅关于建立健全涉企收费长效监管机制的指导意见',
            content: `《国务院办公厅关于建立健全涉企收费长效监管机制的指导意见》于2025年3月28日印发。

一、重点任务（七方面）
1. 健全涉企收费目录清单制度：要求各部门、各省份建立涉企收费目录清单，实现清单全覆盖，清单之外一律不得收费。
2. 完善涉企收费政策评估审核工作机制：对新出台的涉企收费政策进行严格评估审核，对存量政策开展专项整治。
3. 加强涉企收费政策常态化宣传解读。
4. 健全涉企收费跟踪监测制度。
5. 健全涉企收费问题线索收集和处理机制：畅通投诉举报渠道，形成问题线索闭环处理机制。
6. 加强相关领域收费规范：围绕行政审批中介服务机构、行业协会商会、经营自然垄断环节业务的企业等问题多发领域，推动深化改革、清理违规事项。
7. 健全相关法律法规制度：加快推动制定修订价格法、涉企收费违法违规行为处理办法等。`
        },
        {
            title: '公平竞争审查条例',
            content: `《公平竞争审查条例》自2024年8月1日起施行。共5章27条。

一、审查范围
行政机关和法律、法规授权的具有管理公共事务职能的组织，在起草涉及经营者经济活动的法律、行政法规、地方性法规、规章、规范性文件以及具体政策措施时，应当开展公平竞争审查。

二、审查标准（“四不得”）
起草单位起草的政策措施，不得含有以下内容：
1. 限制或者变相限制市场准入和退出（如违法设置审批程序、特许经营权）。
2. 限制商品、要素自由流动。
3. 影响生产经营成本。
4. 影响生产经营行为（如限定经营、购买或使用特定经营者提供的商品或服务）。

三、例外规定
政策措施具有排除、限制竞争效果，但符合维护国家安全、促进科技进步、实现社会公共利益等情形，且没有更小影响的替代方案，并能确定合理实施期限或终止条件的，可以出台。

四、监督保障
县级以上人民政府将公平竞争审查工作情况纳入考核评价内容。未经公平竞争审查或者经审查违反标准且不符合例外情形的政策措施不得出台。`
        },
        {
            title: '基础设施和公用事业特许经营管理办法',
            content: `《基础设施和公用事业特许经营管理办法》自2024年5月1日起施行。

一、适用范围
包括交通运输、市政工程、生态保护、环境治理、水利、能源、体育、旅游等领域。

二、基本原则
坚持公开、公平、公正，保护各方信赖利益，遵循发挥社会资本优势、转变政府职能、保护社会资本合法权益、兼顾经营性和公益性平衡等原则。

三、特许经营期限
特许经营期限应根据行业特点、项目生命周期、投资回收期等综合因素确定，最长不超过30年，对于投资规模大、回报周期长的项目可约定更长期限。

四、监督管理
国务院发展改革、财政等有关部门按照各自职责负责相关领域的政策制定和监督管理。依法保护特许经营者合法权益，任何单位或个人不得非法干涉其合法经营活动。

五、资金保障与风险分担
规定特许经营项目价格或收费应依据相关法律法规和协议确定和调整，并可在用户付费不足以覆盖成本时由政府提供可行性缺口补助。`
        },
        {
            title: '中华人民共和国反垄断法',
            content: `《中华人民共和国反垄断法》于2022年8月1日起施行（修正版）。

一、适用范围
中华人民共和国境内经济活动中的垄断行为适用本法；境外的垄断行为，对境内市场竞争产生排除、限制影响的，也适用本法。

二、垄断行为类型
1. 垄断协议：禁止具有竞争关系的经营者达成固定价格、限制数量、分割市场、联合抵制交易等协议。禁止经营者与交易相对人达成固定转售价格的协议。
2. 滥用市场支配地位：具有市场支配地位的经营者不得滥用其地位排除、限制竞争。
3. 经营者集中：规定了经营者集中审查制度。

三、行政垄断
行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，排除、限制竞争，例如不得限定或变相限定单位或个人经营、购买、使用其指定的经营者提供的商品。

四、法律责任
对违反本法规定实施垄断行为的，反垄断执法机构有权责令停止违法行为，没收违法所得，并处以罚款。对行政机关滥用行政权力实施排除、限制竞争行为的，由上级机关责令改正并对直接责任人给予处分。`
        }
    ]

    for (const r of regulationsToUpdate) {
        const existing = await prisma.regulation.findFirst({
            where: { title: r.title }
        })

        if (existing) {
            await prisma.regulation.update({
                where: { id: existing.id },
                data: { content: r.content }
            })
            console.log(`Updated content for: ${r.title}`)
        } else {
            console.log(`Regulation not found: ${r.title}`)
        }
    }
}

main()
    .then(async () => {
        await prisma.$disconnect()
    })
    .catch(async (e) => {
        console.error(e)
        await prisma.$disconnect()
        process.exit(1)
    })
