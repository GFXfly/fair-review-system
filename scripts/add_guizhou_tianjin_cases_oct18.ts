
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
    // ------------------------------------------------------------------
    // 案例 1：贵州铜仁案例
    // ------------------------------------------------------------------
    const reportGuizhou = await prisma.report.create({
        data: {
            title: '国家市场监督管理总局关于贵州省市场监管局纠正铜仁市住房和城乡建设局滥用行政权力排除、限制竞争行为的通报',
            department: '国家市场监督管理总局',
            publishDate: '2023-10-18',
            province: '贵州省'
        }
    });

    console.log(`创建贵州通报记录，ID: ${reportGuizhou.id}`);

    await prisma.case.create({
        data: {
            title: '贵州省市场监管局纠正铜仁市住房和城乡建设局滥用行政权力排除、限制竞争行为',
            content: `2023年7月20日，贵州省市场监管局依法对铜仁市住房和城乡建设局涉嫌滥用行政权力排除、限制竞争行为为立案调查。
    经查，2022年7月21日，当事人下发《关于加强全市物业管理从业人员岗位培训的通知》，要求全市物业管理企业或个人在其指定的铜仁市物业协会参加物业项目经理、从业人员岗位培训及继续教育培训。2022年7月26日至28日，铜仁市物业协会举办了2022年“物业项目经理”和“物业项目经理继续教育”培训班并收取培训费。2022年8月15日，当事人下发《关于对全市物业服务企业开展“双随机一公开”检查工作的通知》，将是否持证上岗、进行继续教育、建立培训考核制度，以及企业员工培训持证上岗情况等内容纳入行政检查事项。
    贵州省市场监管局认为，当事人下发通知要求全市物业管理企业或个人在其指定的铜仁市物业协会参加培训，并部署行政检查巩固限定事项，损害了铜仁市物业项目经理、从业人员培训领域公平竞争的市场秩序。其行为违反了《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”的规定，构成滥用行政权力排除、限制竞争行为。
    调查期间，当事人积极主动整改，废止和修改相关文件，在政府网站公开发布声明。加强对《中华人民共和国反垄断法》《制止滥用行政权力排除、限制竞争行为规定》《公平竞争审查制度实施细则》等法律法规学习，强化公平竞争审查制度落实，并向贵州省市场监管局提交了整改报告。`,
            violationType: '指定交易/强制培训/行业协会垄断',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”',
            documentName: '《关于加强全市物业管理从业人员岗位培训的通知》',
            documentOrg: '铜仁市住房和城乡建设局',
            province: '贵州省',
            violationDetail: '要求全市物业管理企业或个人在其指定的铜仁市物业协会参加培训，并将参加培训情况纳入行政检查事项。',
            result: '废止和修改相关文件，在政府网站公开发布声明。',
            publishDate: '2023-10-18',
            reportId: reportGuizhou.id
        }
    });

    // ------------------------------------------------------------------
    // 案例 2：天津案例
    // ------------------------------------------------------------------
    const reportTianjin = await prisma.report.create({
        data: {
            title: '国家市场监督管理总局关于天津市市场监督管理委员会纠正天津市道路运输管理局滥用行政权力排除、限制竞争行为的通报',
            department: '国家市场监督管理总局',
            publishDate: '2023-10-18',
            province: '天津市'
        }
    });

    console.log(`创建天津通报记录，ID: ${reportTianjin.id}`);

    await prisma.case.create({
        data: {
            title: '天津市市场监督管理委员会纠正天津市道路运输管理局滥用行政权力排除、限制竞争行为',
            content: `2022年8月2日，天津市市场监督管理委员会依法对天津市道路运输管理局涉嫌滥用行政权力排除、限制竞争行为为立案调查。
    经查，2018年10月以来，当事人在没有法律法规依据的情况下，通过持续发布天津市网络预约出租汽车车载专用设备产品名单，并制定《关于印发网约车车载专用设备技术标准及供应商资质要求的通知》，限定从事网络预约出租车经营的经营者购买、使用其指定的供应商设备，排除、限制了天津市网络预约出租车车载专用设备市场的竞争。截至调查前，文件仍在执行。
    天津市市场监督管理委员会认为，网络预约出租车车载专用设备市场属于竞争性市场，当事人通过制定文件、发布名单，直接指定产品型号和供应商，排除了名单之外设备供应商的进入，限制了网络预约出租车车载专用设备市场的竞争。当事人的上述行为违反了《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”和第四十五条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，制定含有排除、限制竞争内容的规定”的规定，构成滥用行政权力排除、限制竞争行为。
    调查期间，当事人认识到上述行为违反了《中华人民共和国反垄断法》有关规定，积极整改，消除不良影响，主动废除上述文件、名单。同时，当事人通过强化竞争政策理论学习，强化存量文件清理，加强内部公平竞争审查机制建设等措施，防止出台排除、限制竞争的政策措施。`,
            violationType: '指定交易/限定设备供应商',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”和第四十五条',
            documentName: '《关于印发网约车车载专用设备技术标准及供应商资质要求的通知》',
            documentOrg: '天津市道路运输管理局',
            province: '天津市',
            violationDetail: '发布产品名单，限定网约车经营者购买、使用其指定的供应商设备。',
            result: '主动废除上述文件、名单。',
            publishDate: '2023-10-18',
            reportId: reportTianjin.id
        }
    });

    console.log('✓ 所有案例添加完成');
}

main()
    .catch((e) => {
        console.error(e);
        process.exit(1);
    })
    .finally(async () => {
        await prisma.$disconnect();
    });
