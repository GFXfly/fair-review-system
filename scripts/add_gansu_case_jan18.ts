
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
    // 1. 创建通报记录
    // 这里的通告机构是“甘肃省市场监管局”，日期 2024-01-18
    // 注意：这个案例的标题看似和之前的“靖远县”案例重复，但发布主体是甘肃省局自己发布的（之前是国家局转通报），且日期不同（1月18日 vs 1月23日）。
    // 为了保证数据真实性，我们依然作为独立的记录录入，但可以加注说明。
    // 该图片内容与之前的甘肃靖远案例内容高度一致。可能是之前那个是国家局汇总通报，这个是省局原始通报。
    // 如果您确认这是重复的，请告诉我；否则我按照独立条目录入。
    // 观察图片，这个是“甘肃省市场监管局纠正...”，通报日期 2024-01-18。

    // 既然是您要求“继续添加”，我将录入这个省局通报的版本。
    const report = await prisma.report.create({
        data: {
            title: '甘肃省市场监管局纠正靖远县卫生健康局、靖远县财政局滥用行政权力排除、限制竞争行为通报',
            department: '甘肃省市场监管局', // 注意这里是省局
            publishDate: '2024-01-18',     // 日期也不同
            province: '甘肃省'
        }
    });

    console.log(`创建通报记录，ID: ${report.id}`);

    const newCase = await prisma.case.create({
        data: {
            title: '甘肃省靖远县卫生健康局、靖远县财政局滥用行政权力指定体检机构及支付方式',
            content: `2023年9月28日，甘肃省市场监管局依法对靖远县卫生健康局、靖远县财政局（以下简称当事人）涉嫌滥用行政权力排除、限制竞争行为为立案调查。
    经查，2022年5月6日，当事人印发《关于做好干部职工健康体检工作的通知》，规定：“按照属地化原则，确定县内公立医疗机构为全县干部职工健康体检定点医疗机构。各单位在非定点医疗机构安排干部职工健康体检的经费，县级财政一律不予支付”。
    甘肃省市场监管局认为，健康体检市场是一个竞争的市场，体检单位可以自主选择具有合格资质和服务能力的健康体检机构，具有合格资质和服务能力的健康体检机构均可以提供体检服务。当事人指定靖远县内公立医疗机构为全县干部职工健康体检定点医疗机构，排除了其他具有合格资质和服务能力的健康体检机构提供服务，限制了相关单位的自主选择权，妨碍了健康体检市场的公平竞争，违反了《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”的规定，构成滥用行政权力排除、限制竞争行为。
    调查期间，当事人认识到其相关行为违反了《中华人民共和国反垄断法》有关规定，积极整改，主动废止了相关文件并在政府网站公布，向甘肃省市场监管局提交整改报告，举一反三，建立健全公平竞争审查机制，进一步加强公平竞争审查，防止出台排除、限制竞争的政策措施。`,
            violationType: '限定交易/指定服务',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”',
            documentName: '《关于做好干部职工健康体检工作的通知》',
            documentOrg: '甘肃省靖远县卫生健康局、靖远县财政局',
            province: '甘肃省',
            violationDetail: '按照属地化原则，确定县内公立医疗机构为全县干部职工健康体检定点医疗机构；规定非定点机构体检经费县级财政不予支付。',
            result: '主动废止相关文件并在政府网站公布，向甘肃省市场监管局提交整改报告。',
            publishDate: '2024-01-18',
            reportId: report.id
        }
    });

    console.log(`✓ 已添加案例: ${newCase.title}`);
}

main()
    .catch((e) => {
        console.error(e);
        process.exit(1);
    })
    .finally(async () => {
        await prisma.$disconnect();
    });
