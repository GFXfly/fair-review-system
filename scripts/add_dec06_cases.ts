
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
    // ------------------------------------------------------------------
    // 案例 1：上海金山亭林镇案例
    // ------------------------------------------------------------------
    const reportShanghai = await prisma.report.create({
        data: {
            title: '国家市场监督管理总局关于上海市市场监管局纠正上海市金山区亭林镇人民政府滥用行政权力排除、限制竞争行为的通报',
            department: '国家市场监督管理总局',
            publishDate: '2023-12-06',
            province: '上海市'
        }
    });
    console.log(`创建上海通报记录，ID: ${reportShanghai.id}`);

    await prisma.case.create({
        data: {
            title: '上海市市场监管局纠正上海市金山区亭林镇人民政府滥用行政权力排除、限制竞争行为',
            content: `2023年7月26日，上海市市场监管局依法对上海市金山区亭林镇人民政府涉嫌滥用行政权力排除、限制竞争行为为立案调查。
    经查，当事人于2019年10月28日印发《金山区亭林镇人民政府关于印发〈亭林镇小型建设项目管理实施细则〉的通知》，要求设立小型建设工程项目承包单位库，每年选择注册在该镇且具有相应资质的施工单位纳入库内，供小型建设工程项目选择施工单位。截至调查前，文件仍在执行。
    上海市市场监管局认为，当事人通过制定文件，设立小型建设工程项目承包单位库，要求入库企业注册在本镇，影响了其他具备合格资质的承包施工单位平等参与该区域小型建设工程施工建设市场的公平竞争。当事人上述行为违反了《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”和第四十五条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，制定含有排除、限制竞争内容的规定”的规定，构成滥用行政权力排除、限制竞争行为。
    调查期间，当事人认识到其行为违反了《中华人民共和国反垄断法》有关规定，积极整改，消除不良影响，主动对相关文件进行修订，清理含有排除、限制竞争效果的内容。同时，建立健全公平竞争审查机制，进一步加强公平竞争审查，防止出台排除、限制竞争的政策措施。`,
            violationType: '设置名录库/强制本地注册/排斥竞争',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”和第四十五条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，制定含有排除、限制竞争内容的规定”',
            documentName: '《金山区亭林镇人民政府关于印发〈亭林镇小型建设项目管理实施细则〉的通知》',
            documentOrg: '上海市金山区亭林镇人民政府',
            province: '上海市',
            violationDetail: '设立小型建设工程项目承包单位库，要求入库企业注册在本镇。',
            result: '主动对相关文件进行修订，清理含有排除、限制竞争效果的内容。',
            publishDate: '2023-12-06',
            reportId: reportShanghai.id
        }
    });

    // ------------------------------------------------------------------
    // 案例 2：浙江嘉兴南湖案例
    // ------------------------------------------------------------------
    const reportJiaxing = await prisma.report.create({
        data: {
            title: '国家市场监督管理总局关于浙江省市场监管局纠正嘉兴市南湖区人民政府滥用行政权力排除、限制竞争行为的通报',
            department: '国家市场监督管理总局',
            publishDate: '2023-12-06',
            province: '浙江省'
        }
    });
    console.log(`创建嘉兴通报记录，ID: ${reportJiaxing.id}`);

    await prisma.case.create({
        data: {
            title: '浙江省市场监管局纠正嘉兴市南湖区人民政府滥用行政权力排除、限制竞争行为',
            content: `2023年9月27日，浙江省市场监管局依法对嘉兴市南湖区人民政府涉嫌滥用行政权力排除、限制竞争行为为立案调查。
    经查，2023年5月29日，当事人印发《南湖区支持建筑业高质量发展的十项措施》（南政办发〔2023〕31号），规定南湖区区级机关各部门、各镇（街道）园区、各区属国资公司，对政府投资的施工单项合同估算价在60万元人民币以上（含60万元）、400万元人民币以下（不含400万元）的项目，单项合同估算价在30万元人民币以上（含30万元）、200万元人民币以下（不含200万元）的重要设备、材料等货物的采购，单项合同估算价在30万元人民币以上（含30万元）、100万元人民币以下（不含100万元）的勘察、设计、监理等服务的采购，应优先选择区属中小建筑业企业建设或者承接。
    浙江省市场监管局认为，当事人印发文件要求部分政府投资项目由区属中小建筑业企业建设或者承接，排除、限制了外地建筑业企业平等参与相关市场竞争，违反了《中华人民共和国反垄断法》第四十二条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，以设定歧视性资质要求、评审标准或者不依法发布信息等方式，排斥或者限制经营者参加招标投标以及其他经营活动”和第四十五条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，制定含有排除、限制竞争内容的规定”的规定，构成滥用行政权力排除、限制竞争行为。
    调查期间，当事人积极落实整改，及时废止原文件并在政府网站公布，向浙江省市场监管局提交整改报告，全面开展自查自纠，要求区司法局牵头制定《嘉兴市南湖区建筑产业合规指引》，举一反三落实公平竞争审查制度，防止排除、限制竞争的政策措施出台。`,
            violationType: '排斥外地企业/设置歧视性条件',
            violationClause: '《中华人民共和国反垄断法》第四十二条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，以设定歧视性资质要求、评审标准或者不依法发布信息等方式，排斥或者限制经营者参加招标投标以及其他经营活动”和第四十五条',
            documentName: '《南湖区支持建筑业高质量发展的十项措施》（南政办发〔2023〕31号）',
            documentOrg: '浙江省嘉兴市南湖区人民政府',
            province: '浙江省',
            violationDetail: '规定部分政府投资项目应优先选择区属中小建筑业企业建设或者承接。',
            result: '及时废止原文件并在政府网站公布，制定合规指引。',
            publishDate: '2023-12-06',
            reportId: reportJiaxing.id
        }
    });

    // ------------------------------------------------------------------
    // 案例 3：浙江建德案例
    // ------------------------------------------------------------------
    const reportJiande = await prisma.report.create({
        data: {
            title: '国家市场监督管理总局关于浙江省市场监管局纠正建德市人民政府滥用行政权力排除、限制竞争行为的通报',
            department: '国家市场监督管理总局',
            publishDate: '2023-12-06',
            province: '浙江省'
        }
    });
    console.log(`创建建德通报记录，ID: ${reportJiande.id}`);

    await prisma.case.create({
        data: {
            title: '浙江省市场监管局纠正建德市人民政府滥用行政权力排除、限制竞争行为',
            content: `2023年9月27日，浙江省市场监管局依法对建德市人民政府涉嫌滥用行政权力排除、限制竞争行为为立案调查。
    经查，2016年5月20日，当事人印发《建德市天然气管理办法》（建政办函〔2016〕76号），明确要求实行天然气经营企业准入制度，进驻建德市范围内开展天然气经营的企业，其公司注册地必须在建德。2016年6月7日，建德市发展改革局、住房和城乡建设局与某天然气有限公司、某燃气有限公司分别签订建德市天然气市场特许经营协议；两家公司均系注册在建德的独立法人企业。截至调查前，文件仍在执行。
    浙江省市场监管局认为，当事人制发文件强制要求进驻建德市范围内开展天然气经营的企业注册地必须在该市的行为，排除、限制了具有相应资质的外地企业参与相关市场竞争，违反了《中华人民共和国反垄断法》第四十三条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，采取与本地经营者不平等待遇等方式，排斥、限制、强制或者变相强制外地经营者在本地投资或者设立分支机构”和第四十五条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，制定含有排除、限制竞争内容的规定”的规定，构成滥用行政权力排除、限制竞争行为。
    调查期间，当事人高度重视、积极主动整改，及时废止原文件并在政府网站公布，向浙江省市场监管局提交整改报告，全面开展自查自纠，举一反三落实公平竞争审查制度，防止排除、限制竞争的政策措施出台。`,
            violationType: '强制本地注册/排斥外地企业',
            violationClause: '《中华人民共和国反垄断法》第四十三条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，采取与本地经营者不平等待遇等方式，排斥、限制、强制或者变相强制外地经营者在本地投资或者设立分支机构”和第四十五条',
            documentName: '《建德市天然气管理办法》（建政办函〔2016〕76号）',
            documentOrg: '浙江省建德市人民政府',
            province: '浙江省',
            violationDetail: '强制要求进驻建德市范围内开展天然气经营的企业注册地必须在建德。',
            result: '及时废止原文件并在政府网站公布。',
            publishDate: '2023-12-06',
            reportId: reportJiande.id
        }
    });

}

main()
    .catch((e) => {
        console.error(e);
        process.exit(1);
    })
    .finally(async () => {
        await prisma.$disconnect();
    });
