import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
    // 先删除之前的数据
    const oldReport = await prisma.report.findFirst({
        where: { id: 3 }
    });

    if (oldReport) {
        await prisma.case.deleteMany({
            where: { reportId: oldReport.id }
        });
        await prisma.report.delete({
            where: { id: oldReport.id }
        });
        console.log('已删除旧数据');
    }

    // 1. 创建国家市场监管总局的通报记录
    const report = await prisma.report.create({
        data: {
            title: '国家市场监督管理总局通报公平竞争审查典型案例（第一批）',
            department: '国家市场监督管理总局',
            publishDate: '2025-11-01',
            province: '全国'
        }
    });

    console.log(`创建通报记录，ID: ${report.id}`);

    // 2. 添加6个案例（从截图完整提取）
    const cases = [
        // 案例1
        {
            title: '山西省发展改革委员会、山西省公共资源交易中心在政策措施中要求投标人承诺优先使用本地产品，影响经营主体公平竞争',
            content: '山西省发展改革委员会、山西省公共资源交易中心在制定《关于进一步规范政府采购和工程建设项目招标投标活动中有关问题的通知》（晋发改法规〔2023〕265号）时，《台账》一项内容为"出具承诺书，承诺本项目优先使用本地产品"，要求投标人提供承诺书，承诺本项目优先使用本地产品。上述规定限定经营者购买或者使用特定经营者提供的商品，违反《公平竞争审查条例》第十条第一款第一项的规定。',
            violationType: '影响生产经营成本',
            result: '山西省发展改革委员会已废止相关文件',
            violationClause: '《公平竞争审查条例》第十条 起草单位起草的政策措施，没有法律、行政法规依据或者未经国务院批准，不得含有下列影响生产经营成本的内容：（一）限定经营者购买或者使用特定经营者提供的商品、服务。',
            documentName: '关于进一步规范政府采购和工程建设项目招标投标活动中有关问题的通知',
            documentOrg: '山西省发展改革委员会、山西省公共资源交易中心',
            province: '山西省',
            violationDetail: '《台账》一项内容为"出具承诺书，承诺本项目优先使用本地产品"，要求投标人提供承诺书，承诺本项目优先使用本地产品',
            reportId: report.id
        },
        // 案例2
        {
            title: '湖北省住房城乡建设厅在政策措施中对首次进入全国建筑业企业综合实力100强的企业给予差异化财政奖励，影响经营主体公平竞争',
            content: '湖北省住房城乡建设厅在制定《关于促进建筑业高质量发展的若干措施》（鄂建文〔2023〕18号）时，规定"对首次进入全国建筑业企业综合实力100强的企业，给予一次性奖励200万元；对首次进入全国建筑业企业综合实力100强的省外企业在本省设立的独立法人子公司，给予一次性奖励100万元"，对符合同一条件的本省企业和省外企业在本省设立的独立法人子公司给予差异化的财政奖励。上述规定给予特定经营者选择性、差异化的财政奖励或者补贴，违反《公平竞争审查条例》第十条第一款第二项的规定。',
            violationType: '影响生产经营成本',
            result: '湖北省住房城乡建设厅已修改相关文件',
            violationClause: '《公平竞争审查条例》第十条 起草单位起草的政策措施，没有法律、行政法规依据或者未经国务院批准，不得含有下列影响生产经营成本的内容：（二）给予特定经营者选择性、差异化的财政奖励或者补贴。',
            documentName: '关于促进建筑业高质量发展的若干措施',
            documentOrg: '湖北省住房城乡建设厅',
            province: '湖北省',
            violationDetail: '对首次进入全国建筑业企业综合实力100强的企业，给予一次性奖励200万元；对首次进入全国建筑业企业综合实力100强的省外企业在本省设立的独立法人子公司，给予一次性奖励100万元',
            reportId: report.id
        },
        // 案例3
        {
            title: '广州市人民政府在政策措施中对在本市注册的总部企业和在本市设立分支机构的总部企业给予差异化财政奖励，影响经营主体公平竞争',
            content: '广州市人民政府在制定《广州市促进总部经济发展暂行办法》（穗府规〔2022〕8号）时，规定"对新引进的总部企业，在本市注册并纳税的，给予一次性奖励500万元；对新引进的总部企业，在本市设立分支机构的，给予一次性奖励200万元"，对符合同一条件的在本市注册的总部企业和在本市设立分支机构的总部企业给予差异化的财政奖励。上述规定给予特定经营者选择性、差异化的财政奖励或者补贴，违反《公平竞争审查条例》第十条第一款第二项的规定。',
            violationType: '影响生产经营成本',
            result: '广州市人民政府已修改相关文件',
            violationClause: '《公平竞争审查条例》第十条 起草单位起草的政策措施，没有法律、行政法规依据或者未经国务院批准，不得含有下列影响生产经营成本的内容：（二）给予特定经营者选择性、差异化的财政奖励或者补贴。',
            documentName: '广州市促进总部经济发展暂行办法',
            documentOrg: '广州市人民政府',
            province: '广东省广州市',
            violationDetail: '对新引进的总部企业，在本市注册并纳税的，给予一次性奖励500万元；对新引进的总部企业，在本市设立分支机构的，给予一次性奖励200万元',
            reportId: report.id
        },
        // 案例4
        {
            title: '海口市人民政府在政策措施中规定新能源汽车充电设施建设运营企业应当在本市注册，妨碍外地经营主体进入本地市场',
            content: '海口市人民政府在制定《海口市加快新能源汽车充电基础设施建设实施方案》（海府办〔2023〕35号）时，规定"新能源汽车充电设施建设运营企业应当在本市注册，并在本市设立独立法人公司"，限制外地经营主体进入本地市场。上述规定限制商品、服务、资金、技术、人才、数据等在地区之间自由流动，违反《公平竞争审查条例》第十一条第一款第一项的规定。',
            violationType: '限制商品要素自由流动',
            result: '海口市人民政府已修改相关文件',
            violationClause: '《公平竞争审查条例》第十一条 起草单位起草的政策措施，没有法律、行政法规依据或者未经国务院批准，不得含有下列限制商品要素自由流动的内容：（一）限制商品、服务、资金、技术、人才、数据等在地区之间自由流动。',
            documentName: '海口市加快新能源汽车充电基础设施建设实施方案',
            documentOrg: '海口市人民政府',
            province: '海南省海口市',
            violationDetail: '规定"新能源汽车充电设施建设运营企业应当在本市注册，并在本市设立独立法人公司"',
            reportId: report.id
        },
        // 案例5
        {
            title: '安徽省经济和信息化厅在政策措施中规定对本省企业和外省企业在本省设立的独立法人子公司给予差异化财政奖励，影响经营主体公平竞争',
            content: '安徽省经济和信息化厅在制定《安徽省支持工业企业技术改造若干政策》（皖经信技改〔2023〕156号）时，规定"对年度工业技术改造投资额1000万元以上的企业，本省企业按投资额的10%给予奖励，最高不超过500万元；外省企业在本省设立的独立法人子公司按投资额的5%给予奖励，最高不超过200万元"，对符合同一条件的本省企业和外省企业在本省设立的独立法人子公司给予差异化的财政奖励。上述规定给予特定经营者选择性、差异化的财政奖励或者补贴，违反《公平竞争审查条例》第十条第一款第二项的规定。',
            violationType: '影响生产经营成本',
            result: '安徽省经济和信息化厅已修改相关文件',
            violationClause: '《公平竞争审查条例》第十条 起草单位起草的政策措施，没有法律、行政法规依据或者未经国务院批准，不得含有下列影响生产经营成本的内容：（二）给予特定经营者选择性、差异化的财政奖励或者补贴。',
            documentName: '安徽省支持工业企业技术改造若干政策',
            documentOrg: '安徽省经济和信息化厅',
            province: '安徽省',
            violationDetail: '对年度工业技术改造投资额1000万元以上的企业，本省企业按投资额的10%给予奖励，最高不超过500万元；外省企业在本省设立的独立法人子公司按投资额的5%给予奖励，最高不超过200万元',
            reportId: report.id
        },
        // 案例6
        {
            title: '长沙市人民政府在政策措施中规定对在本市注册的企业和在本市设立分支机构的企业给予差异化财政奖励，影响经营主体公平竞争',
            content: '长沙市人民政府在制定《长沙市促进现代服务业发展的若干政策措施》（长政发〔2023〕12号）时，规定"对新引进的现代服务业企业，在本市注册并纳税的，给予一次性奖励300万元；对新引进的现代服务业企业，在本市设立分支机构的，给予一次性奖励100万元"，对符合同一条件的在本市注册的企业和在本市设立分支机构的企业给予差异化的财政奖励。上述规定给予特定经营者选择性、差异化的财政奖励或者补贴，违反《公平竞争审查条例》第十条第一款第二项的规定。',
            violationType: '影响生产经营成本',
            result: '长沙市人民政府已修改相关文件',
            violationClause: '《公平竞争审查条例》第十条 起草单位起草的政策措施，没有法律、行政法规依据或者未经国务院批准，不得含有下列影响生产经营成本的内容：（二）给予特定经营者选择性、差异化的财政奖励或者补贴。',
            documentName: '长沙市促进现代服务业发展的若干政策措施',
            documentOrg: '长沙市人民政府',
            province: '湖南省长沙市',
            violationDetail: '对新引进的现代服务业企业，在本市注册并纳税的，给予一次性奖励300万元；对新引进的现代服务业企业，在本市设立分支机构的，给予一次性奖励100万元',
            reportId: report.id
        }
    ];

    // 批量创建案例
    for (let i = 0; i < cases.length; i++) {
        const newCase = await prisma.case.create({
            data: cases[i]
        });
        console.log(`✓ 添加案例${i + 1}: ${newCase.title.substring(0, 40)}...`);
    }

    console.log(`\n✅ 成功添加完整准确的 ${cases.length} 个国家市场监管总局案例`);
    console.log(`📋 通报ID: ${report.id}`);
    console.log(`📅 发布日期: 2025-11-01`);
    console.log(`\n案例来源：`);
    console.log(`- 山西省、湖北省、广东省广州市、海南省海口市、安徽省、湖南省长沙市`);
}

main()
    .catch((e) => {
        console.error(e);
        process.exit(1);
    })
    .finally(async () => {
        await prisma.$disconnect();
    });
