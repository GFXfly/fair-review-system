
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
    // 1. 创建/查找通报记录 (如果同一批次想归类在一起，可以用同一个 report ID)
    // 这里我们为这个海南省的案例单独创建一个，或者归类到“国家市场监督管理局典型案例”
    // 根据图片，通报机构是“国家市场监督管理局”，日期是 2024-04-17
    const report = await prisma.report.create({
        data: {
            title: '国家市场监督管理局关于海南省卫生健康委员会滥用行政权力排除、限制竞争行为的通报',
            department: '国家市场监督管理局',
            publishDate: '2024-04-17',
            province: '海南省'
        }
    });

    console.log(`创建通报记录，ID: ${report.id}`);

    // 2. 提取并添加案例
    const newCase = await prisma.case.create({
        data: {
            // 标题标准化：主体 + 行为
            title: '海南省卫生健康委员会滥用行政权力限定交易对象排除、限制竞争',

            // 案情内容：保持叙述性，包含经查事实
            content: `海南省市场监督管理局依法对海南省卫生健康委员会（以下简称海南省卫健委）涉嫌滥用行政权力排除、限制竞争行为立案调查。经查，2010年8月至2011年1月期间，原海南省卫生厅（经历次机构改革整合，2018年9月组建海南省卫健委）、原中国保险监督管理委员会海南保监局印发《关于在全省公立医疗机构统一推行医疗责任保险制度的通知》（琼卫法规〔2010〕21号，以下简称“21号文”），原省卫生厅印发《海南省医疗责任保险实施细则（暂行）》（琼卫法规〔2010〕24号，以下简称“24号文”）、《关于切实抓好海南省医疗责任保险投保工作的紧急通知》（琼卫法规〔2011〕1号，以下简称“1号文”）等文件。上述文件部分内容限定海南公立医疗机构购买、使用原海南省卫生厅招标确定的保险公司提供的医疗责任保险服务，同时变相限定海南公立医疗机构使用特定保险经纪机构提供的医疗责任保险经纪服务。截至调查时，相关规定仍在执行。`,

            // 违规性质字段
            violationType: '限定交易/排斥限制竞争',

            // 违反条款：引用反垄断法具体条款
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”和第四十五条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，制定含有排除、限制竞争内容的规定”',

            // 涉案文件及发文单位
            documentName: '《关于在全省公立医疗机构统一推行医疗责任保险制度的通知》（21号文）、《海南省医疗责任保险实施细则（暂行）》（24号文）、《关于切实抓好海南省医疗责任保险投保工作的紧急通知》（1号文）',
            documentOrg: '海南省卫生健康委员会（原海南省卫生厅）',

            province: '海南省',
            publishDate: '2024-04-17',

            // 违规详情概要
            violationDetail: '限定海南公立医疗机构购买、使用原海南省卫生厅招标确定的保险公司提供的医疗责任保险服务；变相限定使用特定保险经纪机构提供的服务。',

            // 处理结果
            result: '海南省卫健委、国家金融监督管理总局海南监管局发文废止了“21号文”“24号文”；海南省卫健委发文废止了“1号文”。海南省市场监管局向海南省卫健委的上级机关海南省人民政府提出依法处理的建议。',

            reportId: report.id
        }
    });

    console.log(`✓ 已添加案例: ${newCase.title}`);
}

main()
    .catch((e) => {
        console.error(e);
        process.exit(1);
    })
    .finally(async () => {
        await prisma.$disconnect();
    });
