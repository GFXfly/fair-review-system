
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
    // 1. 创建通报记录
    // 这三个案例的通告日期都是 2024-02-06，且都是国家市场监管局发布的
    const report = await prisma.report.create({
        data: {
            title: '国家市场监督管理局纠正滥用行政权力排除、限制竞争行为典型案例（2024年第一批）',
            department: '国家市场监督管理局',
            publishDate: '2024-02-06',
            province: '全国' // 涉及多个省份
        }
    });

    console.log(`创建通报记录，ID: ${report.id}`);

    const cases = [
        {
            title: '辽宁省盘锦市住房和城乡建设局指定液化石油气经营企业排除、限制竞争',
            content: `2023年9月6日，辽宁省市场监管局依法对盘锦市住房和城乡建设局涉嫌滥用行政权力排除、限制竞争行为立案调查。经查，2022年11月8日，当事人印发《关于暂定兴隆台区液化石油气经营企业的批复》，明确“在某液化气公司新站建成使用前，由某液化气站负责经营兴隆台区区域液化石油气”。2023年3月9日，当事人印发《关于明确二界沟街道瓶装燃气经营主体的函》，明确“择优选择某液化石油气供应站从即日起作为二界沟区域燃气唯一合法经营主体，负责在二界沟街道（含元荣兴、荣滨区域）经营瓶装液化石油气”。截至调查前，前述文件均在执行。`,
            violationType: '限定交易/独家经营',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”和第四十五条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，制定含有排除、限制竞争内容的规定”',
            documentName: '《关于暂定兴隆台区液化石油气经营企业的批复》、《关于明确二界沟街道瓶装燃气经营主体的函》',
            documentOrg: '辽宁省盘锦市住房和城乡建设局',
            province: '辽宁省',
            violationDetail: '直接指定两家企业分别为兴隆台区和大洼区二界沟街道瓶装液化石油气唯一经营企业，导致其他企业无法在相应区域经营。',
            result: '当事人积极整改，及时废止原文件，向辽宁省市场监管局提交整改报告，全面开展自查自纠。',
            publishDate: '2024-02-06',
            reportId: report.id
        },
        {
            title: '安徽省滁州市凤阳县住房和城乡建设局限定共享单车企业排除、限制竞争',
            content: `2023年9月6日，安徽省市场监管局依法对凤阳县住房和城乡建设局涉嫌滥用行政权力排除、限制竞争行为立案调查。经查，2021年3月，当事人委托某公司以公开招标方式征集并确定两家企业进入凤阳县共享单车、助力车市场运营。2021年5月，当事人分别与上述两家中标单位签订《凤阳县城区共享单车、助力车入场合同》，合同有效期为2年。2023年4月，原合同即将到期，当事人经局长办公会议研究决定再次以公开招标方式重新招标两家企业进入凤阳县共享单车、助力车市场运营。2023年5月，经公开招标，当事人确定两家企业为中标单位，运营期限为3年。`,
            violationType: '限定交易/排斥竞争',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”',
            documentName: '共享单车招标相关文件及合同',
            documentOrg: '安徽省滁州市凤阳县住房和城乡建设局',
            province: '安徽省',
            violationDetail: '在没有法律法规依据的情况下，通过公开招标方式确定两家企业进入市场运营，排除了其他具有合格资质和服务能力的经营主体。',
            result: '当事人主动整改，在该局官方网站发布《关于撤销凤阳县共享单车（电动车）相关文件的公告》，开放共享单车、助力车运营市场。',
            publishDate: '2024-02-06',
            reportId: report.id
        },
        {
            title: '辽宁省辽阳市白塔区住房和城乡建设局变相限定燃气设备确认服务排除、限制竞争',
            content: `2023年9月6日，辽宁省市场监管局依法对辽阳市白塔区住房和城乡建设局涉嫌滥用行政权力排除、限制竞争行为立案调查。经查，2022年10月8日起，辽阳市白塔区城乡建设发展服务中心（以下简称服务中心）受当事人委托，按权限负责全区燃气行业的监督、管理、执法及宣传工作。为加强行业监管，减少安全隐患，服务中心要求瓶装燃气经营企业在进入白塔区销售燃气时，需先到服务中心进行确认登记，并指定由提供配送监管平台经营性服务的第三方平台公司出具确认书。`,
            violationType: '变相限定交易/设置不合理条件',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”',
            documentName: '相关确认登记要求',
            documentOrg: '辽宁省辽阳市白塔区住房和城乡建设局',
            province: '辽宁省',
            violationDetail: '利用行政权力，要求瓶装燃气经营企业需取得第三方平台公司出具的确认书，限定或变相限定气站使用其指定的平台提供的服务。',
            result: '当事人积极主动整改，告知该区瓶装燃气经营企业无需提供配送监管平台出具的确认书，向辽宁省市场监管局提交整改报告。',
            publishDate: '2024-02-06',
            reportId: report.id
        }
    ];

    for (const data of cases) {
        const newCase = await prisma.case.create({ data });
        console.log(`✓ 已添加案例: ${newCase.title}`);
    }
}

main()
    .catch((e) => {
        console.error(e);
        process.exit(1);
    })
    .finally(async () => {
        await prisma.$disconnect();
    });
