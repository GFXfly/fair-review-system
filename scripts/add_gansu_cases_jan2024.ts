
import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

async function main() {
    // 1. 创建通报记录
    // 这三个案例的通告日期都是 2024-01-23，且都是国家市场监管局发布的
    // 看起来是甘肃省市场监管局纠正的案例，由国家局通报
    const report = await prisma.report.create({
        data: {
            title: '国家市场监督管理局纠正甘肃省滥用行政权力排除、限制竞争行为典型案例（2024年1月23日）',
            department: '国家市场监督管理局',
            publishDate: '2024-01-23',
            province: '甘肃省'
        }
    });

    console.log(`创建通报记录，ID: ${report.id}`);

    const cases = [
        {
            title: '甘肃省靖远县卫生健康局、靖远县财政局滥用行政权力排除、限制竞争行为',
            content: `2023年9月28日，甘肃省市场监管局依法对靖远县卫生健康局、靖远县财政局（以下称当事人）涉嫌滥用行政权力排除、限制竞争行为为立案调查。经查，2022年5月6日，当事人印发《关于做好干部职工健康体检工作的通知》规定，“按照属地化原则，确定县内公立医疗机构为全县干部职工健康体检定点医疗机构。各单位在非定点医疗机构安排干部职工健康体检的经费，县级财政一律不予支付”。`,
            violationType: '限定交易/排斥竞争',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”',
            documentName: '《关于做好干部职工健康体检工作的通知》',
            documentOrg: '甘肃省靖远县卫生健康局、靖远县财政局',
            province: '甘肃省',
            violationDetail: '在没有相关法律法规依据的情况下，直接指定靖远县内公立医疗机构为定点体检机构，限制了相关单位的自主选择权，妨碍了健康体检市场的公平竞争。',
            result: '当事人认识到其相关行为违反《反垄断法》，积极整改，主动废止相关文件并在政府网站公布，向甘肃省市场监管局提交整改报告。',
            publishDate: '2024-01-23',
            reportId: report.id
        },
        {
            title: '甘肃省白银市平川区人民政府及平川区卫生健康局滥用行政权力排除、限制竞争行为',
            content: `2023年9月28日，甘肃省市场监管局依法对白银市平川区人民政府及白银市平川区卫生健康局涉嫌滥用行政权力排除、限制竞争行为立案调查。经查，2023年2月22日，区政府办印发《关于加强全区公共场所从业人员预防性健康体检工作的通知》，规定“选定符合要求机构承担全区工作...未经区卫健局指定，擅自开展体检活动的...进行处罚”。2023年3月1日，区卫健局印发通知，指定白银市中心医院为全区食品和公共场所从业人员体检定点机构。`,
            violationType: '限定交易/排斥竞争',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”和第四十五条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，制定含有排除、限制竞争内容的规定”',
            documentName: '《关于加强全区公共场所从业人员预防性健康体检工作的通知》、《关于确定全区食品和公共场所从业人员预防性健康体检定点医疗机构的通知》',
            documentOrg: '甘肃省白银市平川区人民政府及平川区卫生健康局',
            province: '甘肃省',
            violationDetail: '通过印发通知直接指定预防性健康体检机构，排除了其他具有合格资质和服务能力的机构参与竞争。',
            result: '当事人充分认识到其行为违法，主动改正，及时废止相关文件并在政府网站发布公告，向甘肃省市场监管局提交整改报告，恢复市场竞争秩序。',
            publishDate: '2024-01-23',
            reportId: report.id
        },
        {
            title: '甘肃省白银市保健委员会、白银市财政局、白银市卫生健康委员会滥用行政权力排除、限制竞争行为',
            content: `2023年9月28日，甘肃省市场监管局依法对白银市保健委员会、白银市财政局、白银市卫生健康委员会涉嫌滥用行政权力排除、限制竞争行为为立案调查。经查，2022年4月6日，当事人印发《关于做好市直机关事业单位干部职工健康体检工作的通知》，规定“按照属地化原则，确定市第一人民医院等市直机关事业单位干部职工健康体检定点医疗机构...市财政一律不予支付”。`,
            violationType: '限定交易/排斥竞争',
            violationClause: '《中华人民共和国反垄断法》第三十九条“行政机关和法律、法规授权的具有管理公共事务职能的组织不得滥用行政权力，限定或者变相限定单位或者个人经营、购买、使用其指定的经营者提供的商品”',
            documentName: '《关于做好市直机关事业单位干部职工健康体检工作的通知》',
            documentOrg: '甘肃省白银市保健委员会、白银市财政局、白银市卫生健康委员会',
            province: '甘肃省',
            violationDetail: '在无相关法律法规依据情况下，按照属地化原则，确定市直机关事业单位健康体检定点医疗机构，直接剥夺了体检单位的自主选择权，妨碍了公平竞争。',
            result: '当事人充分认识到其行为违法，主动改正，及时废止相关文件并在政府网站公告，向甘肃省市场监管局提交整改报告，恢复健康体检市场的竞争秩序。',
            publishDate: '2024-01-23',
            reportId: report.id
        }
    ];

    for (const data of cases) {
        const newCase = await prisma.case.create({ data });
        console.log(`✓ 已添加案例: ${newCase.title}`);
    }
}

main()
    .catch((e) => {
        console.error(e);
        process.exit(1);
    })
    .finally(async () => {
        await prisma.$disconnect();
    });
